<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function wraps other members of the `tof_extract_*` function family to extract
sample-level features from both lineage (i.e. cell surface antigen) CyTOF channels
assumed to be stable across stimulation conditions and signaling CyTOF channels
assumed to change across stimulation conditions. Features are extracted for
each cluster within each independent sample (as defined with the `group_cols` argument)."><title>Extract aggregated, sample-level features from CyTOF data. — tof_extract_features • tidytof</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract aggregated, sample-level features from CyTOF data. — tof_extract_features"><meta property="og:description" content="This function wraps other members of the `tof_extract_*` function family to extract
sample-level features from both lineage (i.e. cell surface antigen) CyTOF channels
assumed to be stable across stimulation conditions and signaling CyTOF channels
assumed to change across stimulation conditions. Features are extracted for
each cluster within each independent sample (as defined with the `group_cols` argument)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tidytof</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/tidytof.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Extending {tidytof}</h6>
    <a class="dropdown-item" href="../articles/contributing-to-tidytof.html">How to contribute code</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Cell-level operations</h6>
    <a class="dropdown-item" href="../articles/reading-and-writing-data.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/preprocessing.html">Preprocessing</a>
    <a class="dropdown-item" href="../articles/downsampling.html">Downsampling</a>
    <a class="dropdown-item" href="../articles/dimensionality-reduction.html">Dimensionality reduction</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Cluster-level operations</h6>
    <a class="dropdown-item" href="../articles/clustering.html">Clustering and metaclustering</a>
    <a class="dropdown-item" href="../articles/differential-discovery-analysis.html">Differential discovery analysis</a>
    <a class="dropdown-item" href="../articles/feature-extraction.html">Feature extraction</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Sample-level operations</h6>
    <a class="dropdown-item" href="../articles/modeling.html">Building predictive models</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract aggregated, sample-level features from CyTOF data.</h1>
      
      <div class="d-none name"><code>tof_extract_features.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function wraps other members of the `tof_extract_*` function family to extract
sample-level features from both lineage (i.e. cell surface antigen) CyTOF channels
assumed to be stable across stimulation conditions and signaling CyTOF channels
assumed to change across stimulation conditions. Features are extracted for
each cluster within each independent sample (as defined with the `group_cols` argument).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">tof_extract_features</span><span class="op">(</span>
  <span class="va">tof_tibble</span>,
  <span class="va">cluster_col</span>,
  group_cols <span class="op">=</span> <span class="cn">NULL</span>,
  stimulation_col <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">lineage_cols</span>,
  <span class="va">signaling_cols</span>,
  central_tendency_function <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span>,
  signaling_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"threshold"</span>, <span class="st">"emd"</span>, <span class="st">"jsd"</span>, <span class="st">"central tendency"</span><span class="op">)</span>,
  basal_level <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>tof_tibble</dt>
<dd><p>A `tof_tbl` or a `tibble`.</p></dd>
<dt>cluster_col</dt>
<dd><p>An unquoted column name indicating which column in `tof_tibble`
stores the cluster ids of the cluster to which each cell belongs.
Cluster labels can be produced via any method the user chooses - including manual gating,
any of the functions in the `tof_cluster_*` function family, or any other method.</p></dd>
<dt>group_cols</dt>
<dd><p>Unquoted column names representing which columns in `tof_tibble`
should be used to break the rows of `tof_tibble` into subgroups for the feature
extraction calculation. Defaults to NULL (i.e. performing the extraction without subgroups).</p></dd>
<dt>stimulation_col</dt>
<dd><p>Optional. An unquoted column name that indicates which
column in `tof_tibble` contains information about which stimulation condition each cell
was exposed to during data acquisition. If provided, the feature extraction will be
further broken down into subgroups by stimulation condition (and features from each stimulation
condition will be included as their own features in wide format).</p></dd>
<dt>lineage_cols</dt>
<dd><p>Unquoted column names representing which columns in `tof_tibble`
(i.e. which CyTOF protein measurements) should be considered lineage markers in the
feature extraction calculation. Supports tidyselect helpers.</p></dd>
<dt>signaling_cols</dt>
<dd><p>Unquoted column names representing which columns in `tof_tibble`
(i.e. which CyTOF protein measurements) should be considered signaling markers in the
feature extraction calculation. Supports tidyselect helpers.</p></dd>
<dt>central_tendency_function</dt>
<dd><p>The function that will be used to calculate
the measurement of central tendency for each cluster (to be used
as the dependent variable in the linear model). Defaults to <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></code>.</p></dd>
<dt>signaling_method</dt>
<dd><p>A string indicating which feature extraction method to use
for signaling markers (as identified by the `signaling_cols` argument). Options are
"threshold" (the default), "emd", "jsd", and "central tendency".</p></dd>
<dt>basal_level</dt>
<dd><p>A string indicating what the value in `stimulation_col`
corresponds to the basal stimulation condition (i.e. "basal" or "unstimulated").</p></dd>
<dt>...</dt>
<dd><p>Optional additional arguments to be passed to tof_extract_threshold,
<code><a href="tof_extract_emd.html">tof_extract_emd</a></code>, or <code><a href="tof_extract_jsd.html">tof_extract_jsd</a></code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble.
The output tibble will have 1 row for each combination of
the grouping variables provided in `group_cols` (thus, each row will represent
what is considered a single "sample" based on the grouping provided).
It will have one column for each grouping variable and one column for each
extracted feature ("wide" format).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Lineage channels are specified using the `lineage_cols` argument, and their
extracted features will be measurements of central tendency (as computed by the
user-supplied `central_tendency_function`).</p>
<p>Signaling channels are specified
using the `signaling_cols` argument, and their extracted features will depend
on the user's chosen `signaling_method`. If `signaling method` == "threshold"
(the default), <code><a href="tof_extract_threshold.html">tof_extract_threshold</a></code> will be used to calculate the proportion of
cells in each cluster with signaling marker expression over `threshold` in each
stimulation condition. If `signaling_method` == "emd" or `signaling_method` == "jsd",
<code><a href="tof_extract_emd.html">tof_extract_emd</a></code> or <code><a href="tof_extract_jsd.html">tof_extract_jsd</a></code> will be used to calculate the earth-mover's
distance (EMD) or Jensen-Shannon Distance (JSD), respectively, between the basal
condition and each of the stimulated conditions in each cluster for each sample.
Finally, if none of these options are chosen, <code><a href="tof_extract_central_tendency.html">tof_extract_central_tendency</a></code>
will be used to calculate measurements of central tendency.</p>
<p>In addition, <code><a href="tof_extract_proportion.html">tof_extract_proportion</a></code> will be used to extract
the proportion of cells in each cluster will be computed for each sample.</p>
<p>These calculations can be performed either
overall (across all cells in the dataset) or after breaking down the cells into
subgroups using `group_cols`.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other feature extraction functions: 
<code><a href="tof_extract_central_tendency.html">tof_extract_central_tendency</a>()</code>,
<code><a href="tof_extract_emd.html">tof_extract_emd</a>()</code>,
<code><a href="tof_extract_jsd.html">tof_extract_jsd</a>()</code>,
<code><a href="tof_extract_proportion.html">tof_extract_proportion</a>()</code>,
<code><a href="tof_extract_threshold.html">tof_extract_threshold</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Timothy Keyes.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

