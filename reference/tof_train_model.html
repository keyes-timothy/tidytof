<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function uses a training set/test set paradigm to tune and fit an
elastic net model using a variety of user-specified details. Tuning can be
performed using either a simple training vs. test set split, k-fold cross-validation,
or bootstrapping, and multiple preprocessing options are available."><title>Train an elastic net model to predict sample-level phenomena using CyTOF data. — tof_train_model • tidytof</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Train an elastic net model to predict sample-level phenomena using CyTOF data. — tof_train_model"><meta property="og:description" content="This function uses a training set/test set paradigm to tune and fit an
elastic net model using a variety of user-specified details. Tuning can be
performed using either a simple training vs. test set split, k-fold cross-validation,
or bootstrapping, and multiple preprocessing options are available."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tidytof</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Train an elastic net model to predict sample-level phenomena using CyTOF data.</h1>
      
      <div class="d-none name"><code>tof_train_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function uses a training set/test set paradigm to tune and fit an
elastic net model using a variety of user-specified details. Tuning can be
performed using either a simple training vs. test set split, k-fold cross-validation,
or bootstrapping, and multiple preprocessing options are available.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">tof_train_model</span><span class="op">(</span>
  <span class="va">split_data</span>,
  <span class="va">predictor_cols</span>,
  response_col <span class="op">=</span> <span class="cn">NULL</span>,
  time_col <span class="op">=</span> <span class="cn">NULL</span>,
  event_col <span class="op">=</span> <span class="cn">NULL</span>,
  model_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"two-class"</span>, <span class="st">"multiclass"</span>, <span class="st">"survival"</span><span class="op">)</span>,
  hyperparameter_grid <span class="op">=</span> <span class="fu"><a href="tof_create_grid.html">tof_create_grid</a></span><span class="op">(</span><span class="op">)</span>,
  standardize_predictors <span class="op">=</span> <span class="cn">TRUE</span>,
  remove_zv_predictors <span class="op">=</span> <span class="cn">FALSE</span>,
  impute_missing_predictors <span class="op">=</span> <span class="cn">FALSE</span>,
  optimization_metric <span class="op">=</span> <span class="st">"tidytof_default"</span>,
  best_model_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"best"</span>, <span class="st">"best with sparsity"</span><span class="op">)</span>,
  num_cores <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>split_data</dt>
<dd><p>An `rsplit` or `rset` object from the <code><a href="https://rsample.tidymodels.org/reference/rsample.html" class="external-link">rsample</a></code>
package. The easiest way to generate this is to use <code><a href="tof_split_data.html">tof_split_data</a></code></p></dd>
<dt>predictor_cols</dt>
<dd><p>Unquoted column names indicating which columns in the
data contained in `split_data` should be used as predictors in the elastic net model.
Supports tidyselect helpers.</p></dd>
<dt>response_col</dt>
<dd><p>Unquoted column name indicating which column in the data
contained in `split_data` should be used as the outcome in a "two-class", "multiclass",
or "linear" elastic net model. Must be a factor for "two-class" and "multiclass"
models and must be a numeric for "linear" models. Ignored if `model_type` is "survival".</p></dd>
<dt>time_col</dt>
<dd><p>Unquoted column name indicating which column in the data
contained in `split_data` represents the time-to-event outcome in a "survival"
elastic net model. Must be numeric. Ignored if `model_type` is "two-class", "multiclass",
or "linear".</p></dd>
<dt>event_col</dt>
<dd><p>Unquoted column name indicating which column in the data
contained in `split_data` represents the time-to-event outcome in a "survival"
elastic net model. Must be a binary column - all values should be either 0 or 1
(with 1 indicating the adverse event) or FALSE and TRUE (with TRUE indicating the
adverse event). Ignored if `model_type` is "two-class", "multiclass",
or "linear".</p></dd>
<dt>model_type</dt>
<dd><p>A string indicating which kind of elastic net model to build.
If a continuous response is being predicted, use "linear" for linear regression;
if a categorical response with only 2 classes is being predicted, use
"two-class" for logistic regression; if a categorical response with more than 2
levels is being predicted, use "multiclass" for multinomial regression; and if
a time-to-event outcome is being predicted, use "survival" for Cox regression.</p></dd>
<dt>hyperparameter_grid</dt>
<dd><p>A hyperparameter grid indicating which values of
the elastic net penalty (lambda) and the elastic net mixture (alpha) hyperparamters
should be used during model tuning. Generate this grid using <code><a href="tof_create_grid.html">tof_create_grid</a></code>.</p></dd>
<dt>standardize_predictors</dt>
<dd><p>A logical value indicating if numeric predictor columns
should be standardized (centered and scaled) before model fitting. Defaults to TRUE.</p></dd>
<dt>remove_zv_predictors</dt>
<dd><p>A logical value indicating if predictor columns
with near-zero variance should be removed before model fitting using
<code><a href="https://recipes.tidymodels.org/reference/step_nzv.html" class="external-link">step_nzv</a></code>. Defaults to FALSE.</p></dd>
<dt>impute_missing_predictors</dt>
<dd><p>A logical value indicating if predictor columns
should have missing values imputed using k-nearest neighbors before model fitting (see
<code><a href="https://recipes.tidymodels.org/reference/step_impute_knn.html" class="external-link">step_impute_knn</a></code>). Imputation is performed using an observation's
5 nearest-neighbors. Defaults to FALSE.</p></dd>
<dt>optimization_metric</dt>
<dd><p>A string indicating which optimization metric
should be used for hyperparameter selection during model tuning. Valid values
depend on the model_type.</p>
<ul><li><p>For "linear" models, choices are "mse" (the mean squared error
of the predictions; the default) and "mae" (the mean absolute error of the predcitions).</p></li>
<li><p>For "two-class" models, choices are "roc_auc" (the area under the Receiver-Operating
Curve for the classification; the default), "misclassification error" (the proportion of
misclassified observations), "binomial_deviance" (see <code><a href="https://glmnet.stanford.edu/reference/deviance.glmnet.html" class="external-link">deviance.glmnet</a></code>),
"mse" (the mean squared error of the logit function), and "mae" (the mean absolute error of the
logit function).</p></li>
<li><p>For "multiclass" models, choices are "roc_auc" (the area under the Receiver-Operating
Curve for the classification using the Hand-Till generalization of the ROC AUC
for multiclass models in <code><a href="https://yardstick.tidymodels.org/reference/roc_auc.html" class="external-link">roc_auc</a></code>; the default), "misclassification error"
(the proportion of
misclassified observations), "multinomial_deviance" (see <code><a href="https://glmnet.stanford.edu/reference/deviance.glmnet.html" class="external-link">deviance.glmnet</a></code>),
and "mse" and "mae" as above.</p></li>
<li><p>For "survival" models, choices are "concordance_index" (Harrel's C index;
see <code><a href="https://glmnet.stanford.edu/reference/deviance.glmnet.html" class="external-link">deviance.glmnet</a></code>) and "partial_likelihood_deviance"
(see <code><a href="https://glmnet.stanford.edu/reference/deviance.glmnet.html" class="external-link">deviance.glmnet</a></code>).</p></li>
</ul></dd>
<dt>best_model_type</dt>
<dd><p>Currently unused.</p></dd>
<dt>num_cores</dt>
<dd><p>Integer indicating how many cores should be used for parallel
processing when fitting multiple models. Defaults to 1. Overhead to separate
models across multiple cores can be high, so significant speedup is unlikely
to be observed unless many large models are being fit.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A `tof_model`, an S3 class that includes the elastic net model with
the best performance (assessed via cross-validation, bootstrapping, or simple splitting
depending on `split_data`) across all tested hyperparameter value combinations. `tof_models`
store the following information:</p><dl><dt>model</dt>
<dd><p>The final elastic net ("glmnet") model</p></dd>

<dt>recipe</dt>
<dd><p>The <code><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></code> used for data preprocessing</p></dd>

<dt>mixture</dt>
<dd><p>The optimal mixture hyperparameter (alpha) for the glmnet model</p></dd>

<dt>penalty</dt>
<dd><p>The optimal penalty hyperparameter (lambda) for the glmnet model</p></dd>

<dt>model_type</dt>
<dd><p>A string indicating which type of glmnet model was fit</p></dd>

<dt>outcome_colnames</dt>
<dd><p>A character vector representing the names of the columns in the training data modeled as outcome variables</p></dd>

<dt>training_data</dt>
<dd><p>A tibble containing the (not preprocessed) data used to train the model</p></dd>


</dl></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Timothy Keyes.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

